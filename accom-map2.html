<!DOCTYPE html>
<h2>Surf Trip List Accommodations</h2>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Creating a Custom Popup</title>


    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 500px;
        width: 100%;
      },
    </style>


  </head>
  <body>

    <div id="map"></div>

  <script>


    /** Initializes the map and the custom popup. */
    function initMap() {
      //Map options
      var options = {
        zoom:15,
        center: {lat:36.9517, lng:-122.0258}
      }

      //New map
      var map = new google.maps.Map(document.getElementById('map'), options);

      //Array of priceMarkers
      var priceMarkers = [
        {
          coords:{lat:36.9510, lng:-122.0250},
          iconImage:"pm/155.png",
          content:
          `<div class="iw-container">
             <a href="https://www.airbnb.com/rooms/select/3741609"><img src="house.png" style="height=100%; width:100%"></a>
             <b><p class="mb-2" style="color:brown">SHARED ROOM • 2 BEDS</p></b>
             <h5 class="my-0">Surf Trip List House</h5>
             <b><p class="mt-1">$29 per night • Ocean view • Walk to surf</p></b>
          </div>`
            ,
        },
        {
          coords:{lat:36.9510, lng:-122.0350},
          iconImage:"pm/45.png",
          content:
          `<div class="iw-container">
             <a href="https://www.airbnb.com/rooms/select/3741609"><img src="house.png" style="height=100%; width:100%"></a>
             <b><p class="mb-2" style="color:brown">SHARED ROOM • 2 BEDS</p></b>
             <h5 class="my-0">Surf Trip List House</h5>
             <b><p class="mt-1">$29 per night • Ocean view • Walk to surf</p></b>
          </div>`
            ,
        },
        {
          coords:{lat:36.9510, lng:-122.0450},
          iconImage:"pm/25.png",
          content:
          `<div class="iw-container">
             <a href="https://www.airbnb.com/rooms/select/3741609"><img src="house.png" style="height=100%; width:100%"></a>
             <b><p class="mb-2" style="color:brown">SHARED ROOM • 2 BEDS</p></b>
             <h5 class="my-0">Surf Trip List House</h5>
             <b><p class="mt-1">$29 per night • Ocean view • Walk to surf</p></b>
          </div>`
            ,
        },
        {
          coords:{lat:36.9510, lng:-122.0550},
          iconImage:"pm/15.png",
          content:
          `<div style="float:center" class="iw-container">
             <a href="https://www.airbnb.com/rooms/select/3741609"><img src="house.png" style="height=100%; width:100%"></a>
             <b><p class="mb-2" style="color:brown">SHARED ROOM • 2 BEDS</p></b>
             <h5 class="my-0">Surf Trip List House</h5>
             <b><p class="mt-1">$29 per night • Ocean view • Walk to surf</p></b>
          </div>`
            ,
        },
      ];

      //Loop through priceMarkers
      for(var i=0; i<priceMarkers.length; i++) {
        //Add priceMarkers
        addMarker(priceMarkers[i]);
      }

      //Add marker function
      function addMarker(props){
        //Add marker
        var priceMarker = new google.maps.Marker({
          position:props.coords,
          map:map,
          icon: props.iconImage
        });

        var infoWindow = new google.maps.InfoWindow({
          content:props.content
        });

        //Info window click listener
        priceMarker.addListener('click', function(){
          infoWindow.open(map, priceMarker);
          //Removes the 'x' from top left of info window
          $(".gm-style-iw").next("div").hide();
          //Closes windows when map is clicked
          google.maps.event.addListener(map, "click", function(event) {
          //Close info window
              infoWindow.close();
          });

        });

      }
    }//End of initialize map

    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Enables Tooltips -->
    <script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
    </script>

    <!-- Initalizes Firestore -->
    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase-firestore.js"></script>

    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyB85TjM4154F_LU7bWtckJ20i22kjcK1T0",
        authDomain: "surf-trip-list.firebaseapp.com",
        databaseURL: "https://surf-trip-list.firebaseio.com",
        projectId: "surf-trip-list",
        storageBucket: "surf-trip-list.appspot.com",
        messagingSenderId: "743850386285"
      };
      firebase.initializeApp(config);

      // Initialize Cloud Firestore through Firebase
      const db = firebase.firestore();
    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAXPJDWXhzlAY0N8mMUcgFJ6yNSEd0vMg8&callback=initMap">
    </script>

  </body>
</html>
